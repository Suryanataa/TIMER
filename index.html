<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>TIMER</title>
</head>
<body class='xxl vh-100 d-flex align-items-center justify-content-center' style="background-color: black">
    <!-- TIMER -->
    <div class="d-flex text-center flex-column align-items-center">
        <h1 class="text-white display-1"><span id="menit"></span>:<span id="detik"></span></h1>
        <h5 class="text-white">"You can't make up for lost time. You can only do better in the future"</h5>
        <button class="btn btn-primary btn-lg rounded-pill px-5 mt-3" id="reset">Reset</button>
    </div>
    <!-- set & input button -->
    <div class="position-fixed d-flex flex-row align-items-center mt-4" style="top: 0; right: 0;">
        <input type="number" id="input_menit" class="form-control me-2" placeholder="Menit" />
        <input type="number" id="input_detik" class="form-control" placeholder="Detik" />
        <button class="btn btn-outline-primary ms-1" id="set">SET</button>
        <input type="color" id="color" class="form-control mx-3" style="width: 100px;" />
    </div>
    <!-- JS -->
    <script>
        window.onload = function () {
            alert('Selamat Datang!')

            let defaultDalamSatuanDetik = ((30 * 60) + 0)
            let dalamSatuanDetik = defaultDalamSatuanDetik
            let menit = null
            let detik = null

            let hitungMenitDanDetik = function () {
                menit = (Math.floor(dalamSatuanDetik / 60)) || 0
                detik = (dalamSatuanDetik % 60) || 0

                if (menit < 10) {
                    menit = '0' + menit
                }

                if (detik < 10) {
                    detik = '0' + detik
                }

                if (dalamSatuanDetik < 0) {
                    alert('WAKTU TELAH HABIS!')
                    clearInterval(intervalJalan)
                } else {
                    document.querySelector('#menit').innerHTML = menit
                    document.querySelector('#detik').innerHTML = detik
                }
             }

            hitungMenitDanDetik()

            let intervalJalan = setInterval(function () {
                dalamSatuanDetik = dalamSatuanDetik - 1
                hitungMenitDanDetik()
            }, 1000)

            document.querySelector('#reset').addEventListener('click', function () {
                clearInterval(intervalJalan)

                dalamSatuanDetik = defaultDalamSatuanDetik
                hitungMenitDanDetik()

                intervalJalan = setInterval(function () {
                    dalamSatuanDetik = dalamSatuanDetik - 1
                    hitungMenitDanDetik()
                }, 1000)
            })

            document.querySelector('#color').addEventListener('input', function (event) {
                document.querySelector('body').style.backgroundColor = event.target.value;
            })

            document.querySelector('#set').addEventListener('click', function () {
                clearInterval(intervalJalan)

                 menit = parseInt(document.querySelector('#input_menit').value) || 0
                detik = parseInt(document.querySelector('#input_detik').value) || 0
                defaultDalamSatuanDetik = (menit * 60) + detik
                dalamSatuanDetik = defaultDalamSatuanDetik

                intervalJalan = setInterval(function () {
                    dalamSatuanDetik = dalamSatuanDetik - 1
                    hitungMenitDanDetik()
                }, 1000)

                hitungMenitDanDetik()
            })
        }
    </script>
</body>
</html>
